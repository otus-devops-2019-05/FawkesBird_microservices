# FawkesBird_microservices
FawkesBird microservices repository
Author: Evgenii Krasniakov

==================================================================================

- Homework #12 ("docker-2")
В рамках текущего ДЗ сделано:
    * Установка Docker.
    * Тестирование первых контейнеров и образов, выполнение задания по "docker-1.log".
    * Создание нового проекта в GCD, оформление необходимых прав и доступов для
docker-machine.
    * Создание искомого Docker-хоста в рамках нового проекта.
    * Написание и сборка Docker-образа для приложения Reddit, запуск контейнера
на созданном хосте, проверка работоспособности приложения.
    * Загрузка созданного образа на Docker Hub, проверка успешности его работы.

==================================================================================

- Homework #13 ("docker-3")
В рамках текущего ДЗ сделано:
    * Для каждого из компонентов приложения из скачанного архива написан Docker-файл.
    * Произведена сборка приложения на основе полученной Docker-конфигурации.
    * На GCP-инстансе были запущены необходимые Docker-контейнеры и проверена
работоспособность искомого приложения на этом инстансе.
    * Улучшен ui-образ, переписан Docker-файл, перезапущено приложение.
    * Создан Docker Volume, подключен к контейнеру с MondoDB, после чего были удалены
старые копии контейнеров и запущены новые. Проверено, что созданный пост после перезапуска
остаётся на месте.

==================================================================================

- Homework #14 ("docker-4")
В рамках текущего ДЗ сделано:
    * Работа с docker-сетями, изменение Docker-конфигурации в рамках реализации в нашем
проекте bridge-сети, проверка работоспособности изменённой конфигурации.
    * Создание новой конфигурации для docker-compose, перезапуск контейнеров с помощью этого инструмента.
    * Изменение конфигурации для docker-compose под кейс с множеством сетей и сетевых
алиасов, проверка работоспособности изменённой конфигурации.
    * Параметризация конфигурации "docker-compose.yml" c выносом значений параметров в
отдельный файл - ".env" (в рамках ДЗ закоммичен его образец - ".env.example")
----
Ответ на вопрос "Как образуется базовое имя проекта? Можно ли его задать? Если можно то
как?"
    Базовое имя проекта - это имя директории, где находится конфиг "docker-compose.yml"
    для docker-compose. Задать его можно самостоятельно через переменную окружения 
    COMPOSE_PROJECT_NAME или через аргумент "-p" / "--project-name" при запуске
    docker-compose.

==================================================================================

- Homework #15 ("gitlab-ci-1")
В рамках текущего ДЗ сделано:
    * Создан GCP-инстанс, на котором был развёрнут Gitlab c помощью docker-compose.
    * Произведены первичные настройки аккаунта, созданы новые группа и проект.
    * Настройка CI/CD Pipeline, регистрация runner-а.
    * Добавлено приложение, было произведено описание этапов пайплайна для него.
    * Произведено необходимое тестирование приложения.
    * Добавлены и описаны необходимые окружения: "dev", "staging" и "production"
(+ динамические окружения).

==================================================================================

- Homework #16 ("monitoring-1")
В рамках текущего ДЗ сделано:
    * Добавлены необходимые правила фаервола в GCP, а также создан новый GCP-инстанс
для последующей работы.
    * На созданном инстансе был развёрнут Prometheus, проверена успешность его
запуска и работы.
    * В папке "monitoring/prometheus" создан конфигурационный файл Prometheus -
"prometheus.yml", и Dockerfile.
    * С помощью "docker_build.sh" собраны образы микросервисов.
    * Изменена основная Docker-кофигурация "docker-compose.yml" - добавлены
необходимые сервисы, сети и алиасы.
    * Все искомые микросервисы подняты на созданном GCP-инстансе, проверена
доступность приложения, Prometheus-а, а также список endpoint-ов, с которых собирает
информацию Prometheus.
    * Произведен мониторинг состояния ui-сервиса, а также тех сервисов, от которых он
зависит, на основе включения/отключения зависящих сервисов.
    * В основную Docker-конфигурацию добавлен Node-экспортер для сбора информации о
работе Docker-хоста, проверена его работа при мониторинге CPU на инстансе.
    * Собранные в рамках этого ДЗ образы были отправлены на DockerHub (актуальный
label - "latest"):
        - https://cloud.docker.com/repository/docker/fawkesbird/ui
        - https://cloud.docker.com/repository/docker/fawkesbird/comment
        - https://cloud.docker.com/repository/docker/fawkesbird/post
        - https://cloud.docker.com/repository/docker/fawkesbird/prometheus

==================================================================================

- Homework #17 ("monitoring-2")
В рамках текущего ДЗ сделано:
    * Добавлены необходимые правила фаервола в GCP, а также создан новый GCP-инстанс
для последующей работы.
    * На созданный инстанс развёрнут cAdvisor для наблюдения за состояниями Docker
контейнеров, предварительно для него была написана соответствующая конфигурация.
    * Также на созданный инстанс была развёрнута Grafana для визуализации данных из
Prometheus, после чего для неё были произведены необходимые первичные настройки.
    * Для Grafana был импортирован дашборд "Docker and system monitoring", после чего были
получены искомые графики с информацией о состоянии хостовой системы и работе контейнеров.
    * В Grafana были созданы 2 новых дашборда. Первый отображает темпы роста разных
запросов, идущих на созданный инстанс + график 0.95-перцентиля времени выполнения
запросов. Второй дашборд - для счетчиков количества постов и комментариев.
    * Был добавлен Alertmanager, произведена его настройка, а также добавлен алерт,
реагирующий на доступность/недоступность одной из систем для сбора метрик (в целях
безопасности в реальном slack_api_url из конфига "monitoring/alertmanager/config.yml"
скрыты последние 10 символов).
    * Было произведено тестирование этого алерта, для чего был создан отдельный тестовый
Slack-чатик #evgenii_krasniakov_test в воркспейсе "DevOps team". Необходимое сообщение от
AlertManager после остановки post-сервиса было получено.
    * Собранные в рамках этого ДЗ образы были отправлены на DockerHub (актуальный
label - "latest"):
        - https://cloud.docker.com/repository/docker/fawkesbird/ui
        - https://cloud.docker.com/repository/docker/fawkesbird/comment
        - https://cloud.docker.com/repository/docker/fawkesbird/post
        - https://cloud.docker.com/repository/docker/fawkesbird/prometheus
        - https://cloud.docker.com/repository/docker/fawkesbird/alertmanager

==================================================================================
